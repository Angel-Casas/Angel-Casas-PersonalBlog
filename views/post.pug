extends layout

block content
  .post-wrapper
    nav.nav-blog.border-top(role='navigation')
      h5 Table of Contents:
    // End of .nav-blog
    article.post
      #entry
        header
          h3.color(id='header-1')= title
        small.entry-small
          .entry-date Published on:
            time(class='entry-time', datetime=post.date)  #{post.post_time_formatted}
          .entry-comments
            a(href="#blog-comments") Comments #{post.comments.length}
          .entry-tags
            each tag in post.tags
              a(href='/posts/find/' + tag._id)= tag._id.toString().replace('_', ' ')
        | !{post.body}
        .blog-footer
          form(method='post', action=post.url + '/like', name='like_form')
            .button-like
              .icon
              span Like
              span= post.meta.votes
              input(type='submit', name='button-like', class='input-like')
          #bottle-payment-button(data-service="bottle" data-name="%C3%81ngel%20Casas%20Pescador" data-avatar="https://cdn.bottle.li/userimg/01aaaa547eefe42d8b723cb20f6d363712eb7c4322fa470476d0842b6f5a161f.jpg" data-username="28Zzw6HN8tFHKxqLvt2XEVtsi32rMZH4oZGovWQPay7tE" data-text="tip" data-url="https://pay.bottle.li/send/social/")
      #blog-comments
        header
          h4.color Comments
        .comment-count #{post.comments.length} Comments.
        ul.comment-ul
          - var commentIndex = 1;
          each comment in post.comments
            - var time = new Date(comment.date)
            li.border-bottom(id='comment-'+commentIndex)
              .meta
                .comment-number
                  a(href="#comment-"+commentIndex)= commentIndex
                span.author-name= comment.name
                |  said on 
                small= time.toLocaleDateString('en-GB', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })
              .quote
                p= comment.content
              - commentIndex += 1;
          else
            li Be the first to comment!
        form#comments-form(method='POST', action=post.url + '/comment')
          h4.color Leave your comment
          label(for='name')
            input(type='text', placeholder='Name (Optional)', maxlength=20, name='name')
          label(for='content')
            textarea(type='text', rows='5', cols='30', placeholder='Comment', name='content')
          input(type='submit', value='Submit', class='form-button')
      // End of #blog-comments
    // End of .post
    aside.tag_cloud
    
    // End if .tag_cloud
    script(type='text/javascript' src="https://cdn.bottle.li/button/bb.min.js")
    script(type='text/javascript').
      var nav = document.querySelector('.nav-blog');
      var list = initTOC({
        selector: 'h3, h4',
        scope: '#entry',
        prefix: 'header'
      })
      console.log(list.children)
      nav.appendChild(list);
